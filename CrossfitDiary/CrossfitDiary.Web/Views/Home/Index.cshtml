@{
    Layout = "../Shared/_Layout.cshtml";
}
@using CrossfitDiary.Web.ViewModels
@using Newtonsoft.Json
@model HomeViewModel


<div class="home-container">
    <div class="row">
        <div class="container activities-calendar">
            <div class="row">

                @{
                    foreach (ToLogWorkoutViewModel workout in Model.AllWorkouts)
                    {
                        <div class="col-md-offset-3 col-md-5 done-item">
                            <div class="item-header clearfix">
                                <div class="pull-left">
                                    <span class="user-icon">
                                        <i class="fa fa-user" aria-hidden="true"></i>
                                    </span>
                                    <span>@workout.WorkouterName</span>
                                </div>
                                @if (workout.CanBeRemovedByCurrentUser)
                                {
                                    <div class="pull-right remove-workout" title="Remove your workout" data-bind="click: function(){removeWorkout(@workout.CrossfitterWorkoutId);}">
                                        <a class="pointer">
                                            <i class="fa fa-trash" aria-hidden="true"></i>
                                        </a>
                                    </div>
                                }
                                <div class="pull-right">@workout.DisplayDate</div>
                            </div>
                            <div class="item-body clearfix">
                                <div>
                                    <span class="workout-title">@workout.SelectedWorkoutName</span>
                                    @if (!string.IsNullOrEmpty(@workout.MeasureDisplayName))
                                    {
                                        <span>:</span>
                                        <span class="workout-result">@workout.MeasureDisplayName</span>
                                    }
                                </div>
                            </div>
                        </div>
                    }

                }
                @if (Model.AllWorkouts.Count == 0)
                {
                    <div class="col-md-offset-3 col-md-5  ">
                        <div class="done-item text-center">
                            <a class="btn btn-success btn-lg" href="@Url.Action(MVC.Crossfitter.ActionNames.ManageWorkout, MVC.Crossfitter.Name)"><i class="fa fa-star" aria-hidden="true"></i> Let's log our first workout? <i class="fa fa-star" aria-hidden="true"></i></a>

                        </div>

                    </div>
                }

            </div>
        </div>
    </div>
</div>


@section Scripts{
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/knockout")
    @Scripts.Render("~/bundles/bootstrap")

    @Scripts.Render("~/bundles/home")
    <script>
        $(function() {
            const path = "@Url.Content("~")";
            const model = new HomePageController({
                pathToApp: path,
                viewModel: @Html.Raw(JsonConvert.SerializeObject(Model))
            });
            ko.applyBindings(model);
        });
    </script>
}